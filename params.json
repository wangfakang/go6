{"name":"Go6","tagline":"go runtime caller get file name and line","body":"`golang 记录文件函数调用处文件名以及行数`\r\n\r\n\r\n一般我们的项目中的log都会记载一个函数的调用处的文件名以及调用函数所处文件饿行数,这样在追查问题饿时候可以很快.\r\n\r\n\r\n嘿嘿,今天平安夜 (@)快乐~~  我就直接上代码了:\r\n\r\n/home/fakang/worker/go/demo.go\r\n\r\n```c\r\npackage main\r\n\r\nimport (\r\n    \"fmt\"\r\n    \"runtime\"\r\n    \"path\"\r\n    \"strings\"\r\n)\r\n\r\nfunc main() {\r\n\r\n    _, fulleFileName, line, _ := runtime.Caller(0) //获取文件名(包括当前的路径)\r\n    fmt.Println(fulleFileName)\r\n    fmt.Println(line)\r\n    var filenameend string\r\n    filenameend = path.Base(fulleFileName) //只要文件名,去处前面饿路径\r\n    fmt.Println(\"file name end=\", filenameend)\r\n    var filesufix string\r\n    filesufix = path.Ext(filenameend) //获取文件名饿后缀 \r\n    fmt.Println(\"file fix end=\", filesufix)\r\n\r\n    var filenameOnly string\r\n    filenameOnly = strings.TrimSuffix(filenameend, filesufix) //只要文件名本身,不要文件名后缀\r\n    fmt.Println(\"filenameOnly=\", filenameOnly)\r\n}\r\n\r\n\r\n```\r\n\r\noutput:\r\n```c\r\n/home/fakang/worker/go/demo.go\r\n12\r\nfile name end=demo.go\r\nfile fix end=.go\r\nfilenameOnly=demo\r\n```\r\n\r\n```\r\n\r\nfunc Base(path string) string\r\n\r\n   Base returns the last element of path. Trailing slashes are removed before extracting the last element. \r\n   If the path is empty, Base returns \".\". If the path consists entirely of slashes, Base returns \"/\". \r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\nCommunite  \r\n====\r\n \r\n在使用中有任何问题，欢迎反馈给我，可以用以下联系方式跟我交流\r\n\r\n* 邮件(1031379296#qq.com, 把#换成@)\r\n* QQ: 1031379296\r\n* weibo: [@王发康](http://weibo.com/u/2786211992/home)\r\n\r\n\r\nThx\r\n====\r\n\r\n* chunshengsterATgmail.com\r\n\r\n\r\nAuthor\r\n====\r\n* Linux\\nginx\\golang\\c\\c++爱好者\r\n* 欢迎一起交流  一起学习# \r\n* Others say good and Others good","google":"go runtime caller get file name and line go 获取文件名以及行数","note":"Don't delete this file! It's used internally to help with page regeneration."}